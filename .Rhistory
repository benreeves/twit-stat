setwd("C:/Dev/R Projects")
library(jsonlite)
load("C:/Dev/R Projects/.Rhistory")
station <- '3316'
endpoint <- "http://api.openweathermap.org/data/2.5/station?id="
APPID = "&APPID=7c655e7ff063c7ec534f540599a03f88"
apicall<-paste(endpoint, station, APPID)
result<-fromJSON(apicall, flatten=TRUE)
apicall<-paste(endpoint, station, APPID, sep = '')
result<-fromJSON(apicall, flatten=TRUE)
result
df <- cbind.data.frame(result$station$id, result$last)
df
result
df
mydb = dbConnect(MySQL(), user = "root", password = "123qaz098",
dbname = "la_nina", host = "localhost")
library(RMySQL)
mydb = dbConnect(MySQL(), user = "root", password = "123qaz098",
dbname = "la_nina", host = "localhost")
rs <- dbSendQuery(mydb, "select id from test_2")
dt <- as.data.table(fetch(rs, n = -1))
dt
library(data.table)
dt <- as.data.table(fetch(rs, n = -1))
dt
dbWriteTable(mydb, "test_3", df, overwrite = FALSE, append = TRUE)
library(plyr)
rename(df, c("result$station$id"="id"))
dbWriteTable(mydb, "test_3", df, overwrite = FALSE, append = TRUE)
df<-rename(df, c("result$station$id"="id"))
df
dbWriteTable(mydb, "test_3", df, overwrite = FALSE, append = TRUE)
dbWriteTable(mydb, "test_3", df, overwrite = FALSE, append = TRUE)
df
station <- '3369'
endpoint <- "http://api.openweathermap.org/data/2.5/station?id="
APPID = "&APPID=7c655e7ff063c7ec534f540599a03f88"
apicall<-paste(endpoint, station, APPID, sep = '')
result<-fromJSON(apicall, flatten=TRUE)
df <- cbind.data.frame(result$station$id, result$last)
df<-rename(df, c("result$station$id"="id"))
df
station <- '3240'
endpoint <- "http://api.openweathermap.org/data/2.5/station?id="
APPID = "&APPID=7c655e7ff063c7ec534f540599a03f88"
apicall<-paste(endpoint, station, APPID, sep = '')
result<-fromJSON(apicall, flatten=TRUE)
df <- cbind.data.frame(result$station$id, result$last)
df<-rename(df, c("result$station$id"="id"))
df
result
result
result
df
keeps <- c('id', 'main.temp', 'wind.speed', 'wind.deg', 'dewpoint', 'visibility.distance')
DF[,keeps,drop=FALSE]
df[,keeps,drop=FALSE]
df<-unique(df)
df
df<-df[,keeps,drop=FALSE]
df<-unique(df)
df
station <- '29584'
endpoint <- "http://api.openweathermap.org/data/2.5/station?id="
APPID = "&APPID=7c655e7ff063c7ec534f540599a03f88"
apicall<-paste(endpoint, station, APPID, sep = '')
result<-fromJSON(apicall, flatten=TRUE)
result
result<-fromJSON(apicall, flatten=TRUE)
result
apicall
station <- '3240'
endpoint <- "http://api.openweathermap.org/data/2.5/station?id="
APPID = "&APPID=7c655e7ff063c7ec534f540599a03f88"
apicall<-paste(endpoint, station, APPID, sep = '')
result<-fromJSON(apicall, flatten=TRUE)
result
station <- '3242'
endpoint <- "http://api.openweathermap.org/data/2.5/station?id="
APPID = "&APPID=7c655e7ff063c7ec534f540599a03f88"
apicall<-paste(endpoint, station, APPID, sep = '')
result<-fromJSON(apicall, flatten=TRUE)
result
station <- '3245'
endpoint <- "http://api.openweathermap.org/data/2.5/station?id="
APPID = "&APPID=7c655e7ff063c7ec534f540599a03f88"
apicall<-paste(endpoint, station, APPID, sep = '')
result<-fromJSON(apicall, flatten=TRUE)
result
df <- cbind.data.frame(result$station$id, result$last)
df<-rename(df, c("result$station$id"="id"))
df
station <- '3137'
endpoint <- "http://api.openweathermap.org/data/2.5/station?id="
APPID = "&APPID=7c655e7ff063c7ec534f540599a03f88"
apicall<-paste(endpoint, station, APPID, sep = '')
result<-fromJSON(apicall, flatten=TRUE)
result
station <- '3336'
endpoint <- "http://api.openweathermap.org/data/2.5/station?id="
APPID = "&APPID=7c655e7ff063c7ec534f540599a03f88"
apicall<-paste(endpoint, station, APPID, sep = '')
result<-fromJSON(apicall, flatten=TRUE)
result
station <- '3349'
endpoint <- "http://api.openweathermap.org/data/2.5/station?id="
APPID = "&APPID=7c655e7ff063c7ec534f540599a03f88"
apicall<-paste(endpoint, station, APPID, sep = '')
result<-fromJSON(apicall, flatten=TRUE)
result
query <- "Banff,can"
endpoint <- "api.openweathermap.org/data/2.5/weather?q="
apiCall <- paste(endpoint, query, APPID, sep = '')
json2<- fromJSON(apiCall, flatten = TRUE)
endpoint <- "http://api.openweathermap.org/data/2.5/weather?q="
APPID = "&APPID=7c655e7ff063c7ec534f540599a03f88"
apiCall <- paste(endpoint, query, APPID, sep = '')
json2<- fromJSON(apiCall, flatten = TRUE)
json2
query <- "Whitefish,US"
endpoint <- "http://api.openweathermap.org/data/2.5/weather?q="
APPID = "&APPID=7c655e7ff063c7ec534f540599a03f88"
apiCall2<- paste(stationLookup, APPID, sep = '')
apiCall <- paste(endpoint, query, APPID, sep = '')
json2<- fromJSON(apiCall, flatten = TRUE)
json2
station <- '3349'
endpoint <- "http://api.openweathermap.org/data/2.5/station?id="
APPID = "&APPID=7c655e7ff063c7ec534f540599a03f88"
apicall<-paste(endpoint, station, APPID, sep = '')
result<-fromJSON(apicall, flatten=TRUE)
result
df <- cbind.data.frame(result$station$id, result$last)
df<-rename(df, c("result$station$id"="id"))
keeps <- c('id', 'main.temp', 'wind.speed', 'wind.deg', 'rain.1h', 'rain.24h', 'dewpoint', 'visibility.distance',
'dt', 'weather.precipitation', 'weather.intensity', 'weather.descriptor')
df<-df[,keeps,drop=FALSE]
df<-unique(df)
df
df <- cbind.data.frame(result$station$id, result$last)
df
colnames(df)
df<-rename(df, c("result$station$id"="id"))
colnames(df)
keeps
keeps <- intersect(keepsTOT, currentCols)
keepsTOT <- c('id', 'main.temp', 'wind.speed', 'wind.deg', 'rain.1h', 'rain.24h', 'dewpoint', 'visibility.distance',
'dt', 'weather.precipitation', 'weather.intensity', 'weather.descriptor')
currentCols <- colnames(df)
keeps <- intersect(keepsTOT, currentCols)
keeps
df<-df[,keeps,drop=FALSE]
df<-unique(df)
dbWriteTable(mydb, "test_3", df, overwrite = FALSE, append = TRUE)
df
df<-rename(df, c("main.dewpoint"="dewpoint"))
df<-rename(df, c("dewpoint"="main.dewpoint"))
dbWriteTable(mydb, "test_3", df, overwrite = FALSE, append = TRUE)
df<-rename(df, c("dewpoint"="calc.dewpoint"))
df<-rename(df, c("main.dewpoint"="calc.dewpoint"))
dbWriteTable(mydb, "test_3", df, overwrite = FALSE, append = TRUE)
df
result
df <- cbind.data.frame(result$station$id, result$last)
df
station <- '3317'
endpoint <- "http://api.openweathermap.org/data/2.5/station?id="
APPID = "&APPID=7c655e7ff063c7ec534f540599a03f88"
apicall<-paste(endpoint, station, APPID, sep = '')
result<-fromJSON(apicall, flatten=TRUE)
result
station <- '3317'
endpoint <- "http://api.openweathermap.org/data/2.5/station?id="
APPID = "&APPID=7c655e7ff063c7ec534f540599a03f88"
apicall<-paste(endpoint, station, APPID, sep = '')
result<-fromJSON(apicall, flatten=TRUE)
result
station <- '3137'
endpoint <- "http://api.openweathermap.org/data/2.5/station?id="
APPID = "&APPID=7c655e7ff063c7ec534f540599a03f88"
apicall<-paste(endpoint, station, APPID, sep = '')
result<-fromJSON(apicall, flatten=TRUE)
result
df <- cbind.data.frame(result$station$id, result$last)
df
result
df <- cbind.data.frame(result$station$id, result$last)
df
station <- '3349'
endpoint <- "http://api.openweathermap.org/data/2.5/station?id="
APPID = "&APPID=7c655e7ff063c7ec534f540599a03f88"
apicall<-paste(endpoint, station, APPID, sep = '')
result<-fromJSON(apicall, flatten=TRUE)
result
df <- cbind.data.frame(result$station$id, result$last)
df
result
df <- cbind.data.frame(result$station$id, result$last)
df<-rename(df, c("result$station$id"="id"))
df<-rename(df, c("dewpoint"="calc.dewpoint", 'temp'='main.temp'))
keepsTOT <- c('id', 'main.temp', 'wind.speed', 'wind.deg', 'rain.1h', 'rain.24h', 'dewpoint', 'visibility.distance',
'dt', 'weather.precipitation', 'weather.intensity', 'weather.descriptor')
currentCols <- colnames(df)
keeps <- intersect(keepsTOT, currentCols)
df<-df[,keeps,drop=FALSE]
df<-unique(df)
dbWriteTable(mydb, "test_3", df, overwrite = FALSE, append = TRUE)
df
shiny::runApp('twitterAnalysis-app')
setwd("C:/Dev/R Projects/twitterAnalysis-app")
library(RColorBrewer)
library(base64enc)
library(httr)
library(rjson)
library(plyr)
library(stringr)
library(urltools)
library(twitteR)
library(ggplot2)
library(shiny)
library(tm)
library(wordcloud)
#initialize environment variables
sentimentKey <- '8khaViAJdqmsh0UcO5cKITVbC8CCp1lGWRMjsntxdWIPzBjaKI'
consumerKey <- 'MUwukLPqlXp7pROuci6NGHiIo'
consumerSecret <- 'yCucMwTsjMsXFrrKDnHTyawxgKFzzRMGy3UeEyzGGvlQXzIHAV'
tokenKey <- '4095349632-uOfSHrUmPzbuTYDRkASHfUuJBy0YxCesY6QtWbe'
tokenSecret <- 'FS55U9PqOIBTCo3mbV3bHli7aEXMJEGmGjPlpfrifGeTL'
setup_twitter_oauth(consumerKey, consumerSecret, tokenKey, tokenSecret)
shiny::runApp()
shiny::runApp()
